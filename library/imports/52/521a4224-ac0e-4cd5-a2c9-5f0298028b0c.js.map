{"version":3,"sources":["../../../../../../../assets/Script/src/game/common/assets/Script/src/game/common/GameEngine.js"],"names":["Object","defineProperty","exports","value","LoginService_1","require","LocalStorage_1","Http_1","GameEventTransmitter_1","DefaultGameEvent_1","GameDataManager_1","Audio_1","GameEngineClass","loginServerUrl","_playerIdKey","_loginService","LoginService","_localStorage","LocalStorage","_http","Http","_audio","Audio","get","_instance","enumerable","configurable","prototype","showTips","message","changeScene","scene","cc","director","loadScene","currentScene","getScene","currentSceneNode","getChildByName","doPost","url","params","eventCode","_this","httpPost","ret","success","data","GameDataManager","dataChange","GameEventTransmitter","emit","DefaultGameEvent","of","shareGame","GameEngine","instance"],"mappings":"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","file":"GameEngine.js","sourceRoot":"../../../../../../../assets/Script/src/game/common","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar LoginService_1 = require(\"./service/LoginService\");\nvar LocalStorage_1 = require(\"../../core/common/LocalStorage\");\nvar Http_1 = require(\"../../core/net/Http\");\nvar GameEventTransmitter_1 = require(\"../../core/event/GameEventTransmitter\");\nvar DefaultGameEvent_1 = require(\"../../core/event/DefaultGameEvent\");\nvar GameDataManager_1 = require(\"./data/GameDataManager\");\nvar Audio_1 = require(\"../../core/common/Audio\");\nvar GameEngineClass = (function () {\n    function GameEngineClass() {\n        this.loginServerUrl = \"http://127.0.0.1:9099/dzk/\";\n        this._playerIdKey = \"#___player_id__0.2\";\n        this._loginService = new LoginService_1.LoginService();\n        this._localStorage = new LocalStorage_1.LocalStorage();\n        this._http = new Http_1.Http(this.loginServerUrl);\n        this._audio = new Audio_1.Audio(1, 1);\n    }\n    Object.defineProperty(GameEngineClass, \"instance\", {\n        get: function () {\n            if (this._instance == null) {\n                this._instance = new GameEngineClass();\n            }\n            return this._instance;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(GameEngineClass.prototype, \"loginService\", {\n        get: function () {\n            return this._loginService;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(GameEngineClass.prototype, \"localStorage\", {\n        get: function () {\n            return this._localStorage;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(GameEngineClass.prototype, \"http\", {\n        get: function () {\n            return this._http;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(GameEngineClass.prototype, \"audio\", {\n        get: function () {\n            return this._audio;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(GameEngineClass.prototype, \"playerIdKey\", {\n        get: function () {\n            return this._playerIdKey;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    GameEngineClass.prototype.showTips = function (message) {\n    };\n    GameEngineClass.prototype.changeScene = function (scene) {\n        cc.director.loadScene(scene);\n    };\n    GameEngineClass.prototype.currentScene = function () {\n        return cc.director.getScene();\n    };\n    GameEngineClass.prototype.currentSceneNode = function () {\n        return cc.director.getScene().getChildByName('Canvas');\n    };\n    GameEngineClass.prototype.doPost = function (url, params, eventCode) {\n        var _this = this;\n        this._http.httpPost(url, params, function (ret) {\n            if (!ret.success) {\n                _this.showTips(ret.message);\n                return;\n            }\n            var data = ret.data;\n            GameDataManager_1.GameDataManager.dataChange(data);\n            if (eventCode && eventCode != 0) {\n                GameEventTransmitter_1.GameEventTransmitter.emit(DefaultGameEvent_1.DefaultGameEvent.of(eventCode, data));\n            }\n        });\n    };\n    GameEngineClass.prototype.shareGame = function () {\n    };\n    return GameEngineClass;\n}());\nexports.GameEngine = GameEngineClass.instance;\n"]}