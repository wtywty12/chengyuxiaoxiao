{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\assets\\Script\\src\\game\\common/assets\\Script\\src\\game\\common\\ConfigManager.js"],"names":["Object","defineProperty","exports","value","StringUtils_1","require","ConfigManagerClass","_idiomJson","Map","_levelsJson","get","_instance","enumerable","configurable","prototype","load","_this","Promise","fulfill","reject","cc","loader","loadResDir","error","datas","urls","i","length","name_1","StringUtils","getName","data","loadIdiomJson","json","loadLevelJson","_i","datas_1","idiom","set","Number","ID","chengyu","log","datas_2","level","ConfigManager","instance"],"mappings":";;;;AAAA;;AACAA,OAAOC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C,EAAEC,OAAO,IAAT,EAA7C;AACA,IAAIC,gBAAgBC,QAAQ,2BAAR,CAApB;AACA,IAAIC,qBAAsB,YAAY;AAClC,aAASA,kBAAT,GAA8B;AAC1B,aAAKC,UAAL,GAAkB,IAAIC,GAAJ,EAAlB;AACA,aAAKC,WAAL,GAAmB,IAAID,GAAJ,EAAnB;AACH;AACDR,WAAOC,cAAP,CAAsBK,kBAAtB,EAA0C,UAA1C,EAAsD;AAClDI,aAAK,eAAY;AACb,gBAAI,KAAKC,SAAL,IAAkB,IAAtB,EAA4B;AACxB,qBAAKA,SAAL,GAAiB,IAAIL,kBAAJ,EAAjB;AACH;AACD,mBAAO,KAAKK,SAAZ;AACH,SANiD;AAOlDC,oBAAY,IAPsC;AAQlDC,sBAAc;AARoC,KAAtD;AAUAb,WAAOC,cAAP,CAAsBK,mBAAmBQ,SAAzC,EAAoD,cAApD,EAAoE;AAChEJ,aAAK,eAAY;AACb,mBAAO,KAAKH,UAAZ;AACH,SAH+D;AAIhEK,oBAAY,IAJoD;AAKhEC,sBAAc;AALkD,KAApE;AAOAb,WAAOC,cAAP,CAAsBK,mBAAmBQ,SAAzC,EAAoD,eAApD,EAAqE;AACjEJ,aAAK,eAAY;AACb,mBAAO,KAAKD,WAAZ;AACH,SAHgE;AAIjEG,oBAAY,IAJqD;AAKjEC,sBAAc;AALmD,KAArE;AAOAP,uBAAmBQ,SAAnB,CAA6BC,IAA7B,GAAoC,YAAY;AAC5C,YAAIC,QAAQ,IAAZ;AACA,eAAO,IAAIC,OAAJ,CAAY,UAAUC,OAAV,EAAmBC,MAAnB,EAA2B;AAC1CC,eAAGC,MAAH,CAAUC,UAAV,CAAqB,OAArB,EAA8B,UAAUC,KAAV,EAAiBC,KAAjB,EAAwBC,IAAxB,EAA8B;AACxD,oBAAIF,KAAJ,EAAW;AACPH,uBAAGG,KAAH,CAASA,KAAT;AACA;AACH;AACD,qBAAK,IAAIG,IAAI,CAAb,EAAgBA,IAAIF,MAAMG,MAA1B,EAAkCD,GAAlC,EAAuC;AACnC,wBAAIE,SAASxB,cAAcyB,WAAd,CAA0BC,OAA1B,CAAkCL,KAAKC,CAAL,CAAlC,CAAb;AACA,wBAAIK,OAAOP,MAAME,CAAN,CAAX;AACA,wBAAIE,UAAU,OAAd,EAAuB;AACnBZ,8BAAMgB,aAAN,CAAoBD,KAAKE,IAAzB;AACH;AACD,wBAAIL,UAAU,QAAd,EAAwB;AACpBZ,8BAAMkB,aAAN,CAAoBH,KAAKE,IAAzB;AACH;AACJ;AACD,uBAAOf,SAAP;AACH,aAhBD;AAiBH,SAlBM,CAAP;AAmBH,KArBD;AAsBAZ,uBAAmBQ,SAAnB,CAA6BkB,aAA7B,GAA6C,UAAUR,KAAV,EAAiB;AAC1D,YAAIA,SAAS,IAAb,EAAmB;AACf;AACH;AACD,aAAK,IAAIW,KAAK,CAAT,EAAYC,UAAUZ,KAA3B,EAAkCW,KAAKC,QAAQT,MAA/C,EAAuDQ,IAAvD,EAA6D;AACzD,gBAAIE,QAAQD,QAAQD,EAAR,CAAZ;AACA,iBAAK5B,UAAL,CAAgB+B,GAAhB,CAAoBC,OAAOF,MAAMG,EAAb,CAApB,EAAsCH,MAAMI,OAA5C;AACH;AACDrB,WAAGsB,GAAH,CAAO,MAAP,EAAe,KAAKnC,UAApB;AACH,KATD;AAUAD,uBAAmBQ,SAAnB,CAA6BoB,aAA7B,GAA6C,UAAUV,KAAV,EAAiB;AAC1D,YAAIA,SAAS,IAAb,EAAmB;AACf;AACH;AACD,aAAK,IAAIW,KAAK,CAAT,EAAYQ,UAAUnB,KAA3B,EAAkCW,KAAKQ,QAAQhB,MAA/C,EAAuDQ,IAAvD,EAA6D;AACzD,gBAAIJ,OAAOY,QAAQR,EAAR,CAAX;AACA,iBAAK1B,WAAL,CAAiB6B,GAAjB,CAAqBP,KAAKa,KAA1B,EAAiCb,IAAjC;AACH;AACDX,WAAGsB,GAAH,CAAO,MAAP,EAAe,KAAKjC,WAApB;AACH,KATD;AAUA,WAAOH,kBAAP;AACH,CAxEyB,EAA1B;AAyEAJ,QAAQ2C,aAAR,GAAwBvC,mBAAmBwC,QAA3C","file":"ConfigManager.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\Script\\src\\game\\common","sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar StringUtils_1 = require(\"./../../utils/StringUtils\");\r\nvar ConfigManagerClass = (function () {\r\n    function ConfigManagerClass() {\r\n        this._idiomJson = new Map();\r\n        this._levelsJson = new Map();\r\n    }\r\n    Object.defineProperty(ConfigManagerClass, \"instance\", {\r\n        get: function () {\r\n            if (this._instance == null) {\r\n                this._instance = new ConfigManagerClass();\r\n            }\r\n            return this._instance;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ConfigManagerClass.prototype, \"idiomJsonMap\", {\r\n        get: function () {\r\n            return this._idiomJson;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ConfigManagerClass.prototype, \"levelsJsonMap\", {\r\n        get: function () {\r\n            return this._levelsJson;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ConfigManagerClass.prototype.load = function () {\r\n        var _this = this;\r\n        return new Promise(function (fulfill, reject) {\r\n            cc.loader.loadResDir(\"jsons\", function (error, datas, urls) {\r\n                if (error) {\r\n                    cc.error(error);\r\n                    return;\r\n                }\r\n                for (var i = 0; i < datas.length; i++) {\r\n                    var name_1 = StringUtils_1.StringUtils.getName(urls[i]);\r\n                    var data = datas[i];\r\n                    if (name_1 == \"idiom\") {\r\n                        _this.loadIdiomJson(data.json);\r\n                    }\r\n                    if (name_1 == \"levels\") {\r\n                        _this.loadLevelJson(data.json);\r\n                    }\r\n                }\r\n                return fulfill();\r\n            });\r\n        });\r\n    };\r\n    ConfigManagerClass.prototype.loadIdiomJson = function (datas) {\r\n        if (datas == null) {\r\n            return;\r\n        }\r\n        for (var _i = 0, datas_1 = datas; _i < datas_1.length; _i++) {\r\n            var idiom = datas_1[_i];\r\n            this._idiomJson.set(Number(idiom.ID), idiom.chengyu);\r\n        }\r\n        cc.log(\"成语数据\", this._idiomJson);\r\n    };\r\n    ConfigManagerClass.prototype.loadLevelJson = function (datas) {\r\n        if (datas == null) {\r\n            return;\r\n        }\r\n        for (var _i = 0, datas_2 = datas; _i < datas_2.length; _i++) {\r\n            var data = datas_2[_i];\r\n            this._levelsJson.set(data.level, data);\r\n        }\r\n        cc.log(\"关卡数据\", this._levelsJson);\r\n    };\r\n    return ConfigManagerClass;\r\n}());\r\nexports.ConfigManager = ConfigManagerClass.instance;\r\n"]}