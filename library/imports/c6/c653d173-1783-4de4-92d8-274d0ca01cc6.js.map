{"version":3,"sources":["../../../../../../../assets/Script/src/game/common/assets/Script/src/game/common/ConfigManager.js"],"names":["Object","defineProperty","exports","value","StringUtils_1","require","ConfigManagerClass","_idiomJson","Map","get","_instance","enumerable","configurable","prototype","load","_this","Promise","fulfill","reject","cc","loader","loadResDir","error","datas","urls","i","length","name_1","StringUtils","getName","data","loadIdiomJson","json","_i","datas_1","idiom","set","Number","ID","chengyu","log","ConfigManager","instance"],"mappings":";;;;AAAA;;AACAA,OAAOC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C,EAAEC,OAAO,IAAT,EAA7C;AACA,IAAIC,gBAAgBC,QAAQ,2BAAR,CAApB;AACA,IAAIC,qBAAsB,YAAY;AAClC,aAASA,kBAAT,GAA8B;AAC1B,aAAKC,UAAL,GAAkB,IAAIC,GAAJ,EAAlB;AACH;AACDR,WAAOC,cAAP,CAAsBK,kBAAtB,EAA0C,UAA1C,EAAsD;AAClDG,aAAK,eAAY;AACb,gBAAI,KAAKC,SAAL,IAAkB,IAAtB,EAA4B;AACxB,qBAAKA,SAAL,GAAiB,IAAIJ,kBAAJ,EAAjB;AACH;AACD,mBAAO,KAAKI,SAAZ;AACH,SANiD;AAOlDC,oBAAY,IAPsC;AAQlDC,sBAAc;AARoC,KAAtD;AAUAZ,WAAOC,cAAP,CAAsBK,mBAAmBO,SAAzC,EAAoD,cAApD,EAAoE;AAChEJ,aAAK,eAAY;AACb,mBAAO,KAAKF,UAAZ;AACH,SAH+D;AAIhEI,oBAAY,IAJoD;AAKhEC,sBAAc;AALkD,KAApE;AAOAN,uBAAmBO,SAAnB,CAA6BC,IAA7B,GAAoC,YAAY;AAC5C,YAAIC,QAAQ,IAAZ;AACA,eAAO,IAAIC,OAAJ,CAAY,UAAUC,OAAV,EAAmBC,MAAnB,EAA2B;AAC1CC,eAAGC,MAAH,CAAUC,UAAV,CAAqB,OAArB,EAA8B,UAAUC,KAAV,EAAiBC,KAAjB,EAAwBC,IAAxB,EAA8B;AACxD,oBAAIF,KAAJ,EAAW;AACPH,uBAAGG,KAAH,CAASA,KAAT;AACA;AACH;AACD,qBAAK,IAAIG,IAAI,CAAb,EAAgBA,IAAIF,MAAMG,MAA1B,EAAkCD,GAAlC,EAAuC;AACnC,wBAAIE,SAASvB,cAAcwB,WAAd,CAA0BC,OAA1B,CAAkCL,KAAKC,CAAL,CAAlC,CAAb;AACA,wBAAIK,OAAOP,MAAME,CAAN,CAAX;AACA,wBAAIE,UAAU,OAAd,EAAuB;AACnBZ,8BAAMgB,aAAN,CAAoBD,KAAKE,IAAzB;AACH;AACJ;AACD,uBAAOf,SAAP;AACH,aAbD;AAcH,SAfM,CAAP;AAgBH,KAlBD;AAmBAX,uBAAmBO,SAAnB,CAA6BkB,aAA7B,GAA6C,UAAUR,KAAV,EAAiB;AAC1D,YAAIA,SAAS,IAAb,EAAmB;AACf;AACH;AACD,aAAK,IAAIU,KAAK,CAAT,EAAYC,UAAUX,KAA3B,EAAkCU,KAAKC,QAAQR,MAA/C,EAAuDO,IAAvD,EAA6D;AACzD,gBAAIE,QAAQD,QAAQD,EAAR,CAAZ;AACA,iBAAK1B,UAAL,CAAgB6B,GAAhB,CAAoBC,OAAOF,MAAMG,EAAb,CAApB,EAAsCH,MAAMI,OAA5C;AACH;AACDpB,WAAGqB,GAAH,CAAO,MAAP,EAAe,KAAKjC,UAApB;AACH,KATD;AAUA,WAAOD,kBAAP;AACH,CAnDyB,EAA1B;AAoDAJ,QAAQuC,aAAR,GAAwBnC,mBAAmBoC,QAA3C","file":"ConfigManager.js","sourceRoot":"../../../../../../../assets/Script/src/game/common","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar StringUtils_1 = require(\"./../../utils/StringUtils\");\nvar ConfigManagerClass = (function () {\n    function ConfigManagerClass() {\n        this._idiomJson = new Map();\n    }\n    Object.defineProperty(ConfigManagerClass, \"instance\", {\n        get: function () {\n            if (this._instance == null) {\n                this._instance = new ConfigManagerClass();\n            }\n            return this._instance;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ConfigManagerClass.prototype, \"idiomJsonMap\", {\n        get: function () {\n            return this._idiomJson;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ConfigManagerClass.prototype.load = function () {\n        var _this = this;\n        return new Promise(function (fulfill, reject) {\n            cc.loader.loadResDir(\"jsons\", function (error, datas, urls) {\n                if (error) {\n                    cc.error(error);\n                    return;\n                }\n                for (var i = 0; i < datas.length; i++) {\n                    var name_1 = StringUtils_1.StringUtils.getName(urls[i]);\n                    var data = datas[i];\n                    if (name_1 == \"idiom\") {\n                        _this.loadIdiomJson(data.json);\n                    }\n                }\n                return fulfill();\n            });\n        });\n    };\n    ConfigManagerClass.prototype.loadIdiomJson = function (datas) {\n        if (datas == null) {\n            return;\n        }\n        for (var _i = 0, datas_1 = datas; _i < datas_1.length; _i++) {\n            var idiom = datas_1[_i];\n            this._idiomJson.set(Number(idiom.ID), idiom.chengyu);\n        }\n        cc.log(\"成语数据\", this._idiomJson);\n    };\n    return ConfigManagerClass;\n}());\nexports.ConfigManager = ConfigManagerClass.instance;\n"]}