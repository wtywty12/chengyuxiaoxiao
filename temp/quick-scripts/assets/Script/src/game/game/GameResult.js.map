{"version":3,"sources":["GameResult.js"],"names":["Object","defineProperty","exports","value","Tools_1","require","GameManager_1","RecordGrid_1","GameResult","gameTable","chooseView","randomAry","prototype","startResult","idiomAry","cc","log","chooseAry","RecordGrid","getChooseGridAry","isSussess","i","length","idiom","isEqual","j","substring","getGridString","onSuccessFul","onFailed","clearData","Tools","getMapLength","getGameTableGridMap","GameManager","onGameOver","restoreIdiom","clearRecordData","clearChooseGrid"],"mappings":";;;;AAAA;;AACAA,OAAOC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C,EAAEC,OAAO,IAAT,EAA7C;AACA,IAAIC,UAAUC,QAAQ,mBAAR,CAAd;AACA,IAAIC,gBAAgBD,QAAQ,eAAR,CAApB;AACA,IAAIE,eAAeF,QAAQ,4BAAR,CAAnB;AACA,IAAIG,aAAc,YAAY;AAC1B,aAASA,UAAT,CAAoBC,SAApB,EAA+BC,UAA/B,EAA2C;AACvC,aAAKC,SAAL,GAAiB,IAAjB;AACA,aAAKF,SAAL,GAAiB,IAAjB;AACA,aAAKC,UAAL,GAAkB,IAAlB;AACA,aAAKD,SAAL,GAAiBA,SAAjB;AACA,aAAKC,UAAL,GAAkBA,UAAlB;AACH;AACDF,eAAWI,SAAX,CAAqBC,WAArB,GAAmC,UAAUC,QAAV,EAAoB;AACnDC,WAAGC,GAAH,CAAO,MAAP;AACA,YAAIC,YAAYV,aAAaW,UAAb,CAAwBC,gBAAxB,EAAhB;AACA,YAAIC,YAAY,KAAhB;AACA,aAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIP,SAASQ,MAA7B,EAAqCD,GAArC,EAA0C;AACtC,gBAAIE,QAAQT,SAASO,CAAT,CAAZ;AACA,gBAAIG,UAAU,IAAd;AACA,iBAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAI,CAApB,EAAuBA,GAAvB,EAA4B;AACxB,oBAAIF,MAAMG,SAAN,CAAgBD,CAAhB,EAAmBA,IAAI,CAAvB,KAA6BR,UAAUQ,CAAV,EAAaE,aAAb,EAAjC,EAA+D;AAC3DH,8BAAU,KAAV;AACA;AACH;AACJ;AACD,gBAAIA,OAAJ,EAAa;AACTJ,4BAAY,IAAZ;AACA;AACH;AACJ;AACD,YAAIA,SAAJ,EAAe;AACX,iBAAKQ,YAAL;AACH,SAFD,MAGK;AACD,iBAAKC,QAAL;AACH;AACJ,KAxBD;AAyBArB,eAAWI,SAAX,CAAqBgB,YAArB,GAAoC,YAAY;AAC5Cb,WAAGC,GAAH,CAAO,MAAP;AACA,aAAKc,SAAL;AACA,YAAI1B,QAAQ2B,KAAR,CAAcC,YAAd,CAA2BzB,aAAaW,UAAb,CAAwBe,mBAAxB,EAA3B,KAA6E,EAAjF,EAAqF;AACjF3B,0BAAc4B,WAAd,CAA0BC,UAA1B;AACH;AACD;AACH,KAPD;AAQA3B,eAAWI,SAAX,CAAqBiB,QAArB,GAAgC,YAAY;AACxCd,WAAGC,GAAH,CAAO,MAAP;AACA,aAAKN,UAAL,CAAgB0B,YAAhB;AACA,aAAKN,SAAL;AACH,KAJD;AAKAtB,eAAWI,SAAX,CAAqBkB,SAArB,GAAiC,YAAY;AACzCvB,qBAAaW,UAAb,CAAwBmB,eAAxB;AACA,aAAK3B,UAAL,CAAgB4B,eAAhB;AACH,KAHD;AAIA,WAAO9B,UAAP;AACH,CAnDiB,EAAlB;AAoDAN,QAAQM,UAAR,GAAqBA,UAArB","file":"GameResult.js","sourceRoot":"../../../../../../../assets/Script/src/game/game","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Tools_1 = require(\"../../utils/Tools\");\nvar GameManager_1 = require(\"./GameManager\");\nvar RecordGrid_1 = require(\"../common/model/RecordGrid\");\nvar GameResult = (function () {\n    function GameResult(gameTable, chooseView) {\n        this.randomAry = null;\n        this.gameTable = null;\n        this.chooseView = null;\n        this.gameTable = gameTable;\n        this.chooseView = chooseView;\n    }\n    GameResult.prototype.startResult = function (idiomAry) {\n        cc.log(\"开始判定\");\n        var chooseAry = RecordGrid_1.RecordGrid.getChooseGridAry();\n        var isSussess = false;\n        for (var i = 0; i < idiomAry.length; i++) {\n            var idiom = idiomAry[i];\n            var isEqual = true;\n            for (var j = 0; j < 4; j++) {\n                if (idiom.substring(j, j + 1) != chooseAry[j].getGridString()) {\n                    isEqual = false;\n                    break;\n                }\n            }\n            if (isEqual) {\n                isSussess = true;\n                break;\n            }\n        }\n        if (isSussess) {\n            this.onSuccessFul();\n        }\n        else {\n            this.onFailed();\n        }\n    };\n    GameResult.prototype.onSuccessFul = function () {\n        cc.log(\"判定成功\");\n        this.clearData();\n        if (Tools_1.Tools.getMapLength(RecordGrid_1.RecordGrid.getGameTableGridMap()) == 64) {\n            GameManager_1.GameManager.onGameOver();\n        }\n        ;\n    };\n    GameResult.prototype.onFailed = function () {\n        cc.log(\"判定失败\");\n        this.chooseView.restoreIdiom();\n        this.clearData();\n    };\n    GameResult.prototype.clearData = function () {\n        RecordGrid_1.RecordGrid.clearRecordData();\n        this.chooseView.clearChooseGrid();\n    };\n    return GameResult;\n}());\nexports.GameResult = GameResult;\n"]}