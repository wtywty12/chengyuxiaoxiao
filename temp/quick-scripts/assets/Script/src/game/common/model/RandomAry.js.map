{"version":3,"sources":["RandomAry.js"],"names":["Object","defineProperty","exports","value","ConfigManager_1","require","RandomAry","need","needValus","configLength","jsonData","Map","produceArray","ConfigManager","idiomJsonMap","getMapLength","init","prototype","cc","log","randomAry","getRandomAry","randomIdiom","getRandomAryIdiom","getSplitArray","getProduceArray","map","lenght","forEach","i","rand","Math","trunc","random","isOk","j","length","push","arr","idiomAry","v","s","toString","get","substring","produceLength","floor","temp"],"mappings":"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","file":"RandomAry.js","sourceRoot":"../../../../../../../../assets/Script/src/game/common/model","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ConfigManager_1 = require(\"./../ConfigManager\");\nvar RandomAry = (function () {\n    function RandomAry(need) {\n        this.needValus = null;\n        this.configLength = null;\n        this.jsonData = new Map();\n        this.produceArray = null;\n        this.needValus = need;\n        this.jsonData = ConfigManager_1.ConfigManager.idiomJsonMap;\n        this.produceArray = [];\n        this.configLength = this.getMapLength(this.jsonData);\n        this.init();\n    }\n    RandomAry.prototype.init = function () {\n        if (this.configLength <= 0) {\n            cc.log(\"json读取失败\");\n            return;\n        }\n        var randomAry = this.getRandomAry();\n        var randomIdiom = this.getRandomAryIdiom(randomAry);\n        this.produceArray = this.getSplitArray(randomIdiom);\n    };\n    RandomAry.prototype.getProduceArray = function () {\n        return this.produceArray;\n    };\n    RandomAry.prototype.getMapLength = function (map) {\n        var lenght = 0;\n        map.forEach(function (value) {\n            lenght++;\n        });\n        return lenght;\n    };\n    RandomAry.prototype.getRandomAry = function () {\n        var randomAry = [];\n        for (var i = 0; i < this.needValus; i++) {\n            var rand = Math.trunc(Math.random() * this.configLength);\n            var isOk = true;\n            for (var j = 0; j < randomAry.length; j++) {\n                if (randomAry[j] == rand) {\n                    isOk = false;\n                    break;\n                }\n            }\n            if (isOk) {\n                randomAry.push(rand);\n            }\n        }\n        return randomAry;\n    };\n    RandomAry.prototype.getRandomAryIdiom = function (arr) {\n        var idiomAry = [];\n        for (var i = 0; i < arr.length; i++) {\n            var v = arr[i];\n            var s = v.toString();\n            idiomAry.push(this.jsonData.get(v));\n        }\n        return idiomAry;\n    };\n    RandomAry.prototype.getSplitArray = function (arr) {\n        var produceArray = [];\n        for (var i = 0; i < arr.length; i++) {\n            var v = arr[i];\n            for (var j = 0; j < v.length; j++) {\n                var s = v.substring(j, j + 1);\n                produceArray.push(s);\n            }\n        }\n        var produceLength = produceArray.length;\n        for (var i = 0; i < produceLength; i++) {\n            var rand = Math.floor(Math.random() * produceLength);\n            if (i != rand) {\n                var temp = produceArray[i];\n                produceArray[i] = produceArray[rand];\n                produceArray[rand] = temp;\n            }\n        }\n        return produceArray;\n    };\n    return RandomAry;\n}());\nexports.RandomAry = RandomAry;\n"]}