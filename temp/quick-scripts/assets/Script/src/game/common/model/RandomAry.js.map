{"version":3,"sources":["RandomAry.js"],"names":["Object","defineProperty","exports","value","ConfigManager_1","require","RandomAry","need","needValus","configLength","jsonData","Map","produceArray","randomIdiom","ConfigManager","idiomJsonMap","getMapLength","init","prototype","cc","log","randomAry","getRandomAry","getRandomAryIdiom","getSplitArray","getRandomIdiom","getProduceArray","map","lenght","forEach","i","rand","Math","trunc","random","isOk","j","length","push","arr","idiomAry","v","s","toString","get","substring","produceLength","floor","temp"],"mappings":"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","file":"RandomAry.js","sourceRoot":"../../../../../../../../assets/Script/src/game/common/model","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ConfigManager_1 = require(\"./../ConfigManager\");\nvar RandomAry = (function () {\n    function RandomAry(need) {\n        this.needValus = null;\n        this.configLength = null;\n        this.jsonData = new Map();\n        this.produceArray = null;\n        this.randomIdiom = null;\n        this.needValus = need;\n        this.jsonData = ConfigManager_1.ConfigManager.idiomJsonMap;\n        this.produceArray = [];\n        this.configLength = this.getMapLength(this.jsonData);\n        this.init();\n    }\n    RandomAry.prototype.init = function () {\n        if (this.configLength <= 0) {\n            cc.log(\"json读取失败\");\n            return;\n        }\n        var randomAry = this.getRandomAry();\n        this.randomIdiom = this.getRandomAryIdiom(randomAry);\n        this.produceArray = this.getSplitArray(this.randomIdiom);\n    };\n    RandomAry.prototype.getRandomIdiom = function () {\n        return this.randomIdiom;\n    };\n    RandomAry.prototype.getProduceArray = function () {\n        return this.produceArray;\n    };\n    RandomAry.prototype.getMapLength = function (map) {\n        var lenght = 0;\n        map.forEach(function (value) {\n            lenght++;\n        });\n        return lenght;\n    };\n    RandomAry.prototype.getRandomAry = function () {\n        var randomAry = [];\n        for (var i = 0; i < this.needValus; i++) {\n            var rand = Math.trunc(Math.random() * this.configLength);\n            var isOk = true;\n            for (var j = 0; j < randomAry.length; j++) {\n                if (randomAry[j] == rand) {\n                    isOk = false;\n                    break;\n                }\n            }\n            if (isOk) {\n                randomAry.push(rand);\n            }\n        }\n        return randomAry;\n    };\n    RandomAry.prototype.getRandomAryIdiom = function (arr) {\n        var idiomAry = [];\n        for (var i = 0; i < arr.length; i++) {\n            var v = arr[i];\n            var s = v.toString();\n            idiomAry.push(this.jsonData.get(v));\n        }\n        cc.log(\"关卡成语   =>    \", idiomAry);\n        return idiomAry;\n    };\n    RandomAry.prototype.getSplitArray = function (arr) {\n        var produceArray = [];\n        for (var i = 0; i < arr.length; i++) {\n            var v = arr[i];\n            for (var j = 0; j < v.length; j++) {\n                var s = v.substring(j, j + 1);\n                produceArray.push(s);\n            }\n        }\n        var produceLength = produceArray.length;\n        for (var i = 0; i < produceLength; i++) {\n            var rand = Math.floor(Math.random() * produceLength);\n            if (i != rand) {\n                var temp = produceArray[i];\n                produceArray[i] = produceArray[rand];\n                produceArray[rand] = temp;\n            }\n        }\n        return produceArray;\n    };\n    return RandomAry;\n}());\nexports.RandomAry = RandomAry;\n"]}