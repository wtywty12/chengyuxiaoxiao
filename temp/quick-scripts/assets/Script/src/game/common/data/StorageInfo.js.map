{"version":3,"sources":["StorageInfo.js"],"names":["Object","defineProperty","exports","value","GameEngine_1","require","GameDataManager_1","StorageInfoClass","get","_instance","enumerable","configurable","prototype","setFirstLogin","getFirstLogin","GameEngine","localStorage","set","setTopScore","score","topScore","getTopScore","console","log","wx","getOpenDataContext","postMessage","EventType","EventData","level","GameDataManager","gameData","toString","resetRedPackTimes","setRedPackTimes","times","redPacktimes","getRedPackTimes","setRedPackMoney","money","redPackMoney","getRedPackMoney","setGameYear","year","setGameMonth","month","setGameDate","date","setGameAudioStatus","status","addPlayTimes","getPlayTimes","Number","getGameYear","getGameMonth","getGameDate","getGameAudioStatus","isFirstLogin","StorageInfo","instance"],"mappings":"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","file":"StorageInfo.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\..\\assets\\Script\\src\\game\\common\\data","sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar GameEngine_1 = require(\"../GameEngine\");\r\nvar GameDataManager_1 = require(\"./GameDataManager\");\r\nvar StorageInfoClass = (function () {\r\n    function StorageInfoClass() {\r\n    }\r\n    Object.defineProperty(StorageInfoClass, \"instance\", {\r\n        get: function () {\r\n            if (this._instance == null) {\r\n                this._instance = new StorageInfoClass();\r\n            }\r\n            return this._instance;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    StorageInfoClass.prototype.setFirstLogin = function () {\r\n        if (this.getFirstLogin() == true) {\r\n            GameEngine_1.GameEngine.localStorage.set(\"FirstLogin\", \"true\");\r\n        }\r\n    };\r\n    StorageInfoClass.prototype.setTopScore = function (score) {\r\n        var topScore = this.getTopScore();\r\n        ;\r\n        if (score > topScore) {\r\n            if (typeof (score) != \"number\") {\r\n                console.log(\"score is not number!\");\r\n                return;\r\n            }\r\n            wx.getOpenDataContext().postMessage({\r\n                EventType: \"2\",\r\n                EventData: { score: score, level: GameDataManager_1.GameDataManager.gameData.level }\r\n            });\r\n            GameEngine_1.GameEngine.localStorage.set(\"TopScore\", score.toString());\r\n        }\r\n    };\r\n    StorageInfoClass.prototype.resetRedPackTimes = function () {\r\n        GameEngine_1.GameEngine.localStorage.set(\"RedPackTimes\", \"0\");\r\n    };\r\n    StorageInfoClass.prototype.setRedPackTimes = function (times) {\r\n        var redPacktimes = this.getRedPackTimes() + times;\r\n        GameEngine_1.GameEngine.localStorage.set(\"RedPackTimes\", redPacktimes.toString());\r\n    };\r\n    StorageInfoClass.prototype.setRedPackMoney = function (money) {\r\n        if (typeof (money) == \"number\") {\r\n            var redPackMoney = this.getRedPackMoney() + money;\r\n            GameEngine_1.GameEngine.localStorage.set(\"RedPackMoney\", redPackMoney.toString());\r\n        }\r\n    };\r\n    StorageInfoClass.prototype.setGameYear = function (year) {\r\n        GameEngine_1.GameEngine.localStorage.set(\"GameYear\", year);\r\n    };\r\n    StorageInfoClass.prototype.setGameMonth = function (month) {\r\n        GameEngine_1.GameEngine.localStorage.set(\"GameMonth\", month);\r\n    };\r\n    StorageInfoClass.prototype.setGameDate = function (date) {\r\n        GameEngine_1.GameEngine.localStorage.set(\"GameDate\", date);\r\n    };\r\n    StorageInfoClass.prototype.setGameAudioStatus = function (status) {\r\n        GameEngine_1.GameEngine.localStorage.set(\"GameAudioStatus\", status);\r\n    };\r\n    StorageInfoClass.prototype.addPlayTimes = function () {\r\n        var times = this.getPlayTimes() + 1;\r\n        GameEngine_1.GameEngine.localStorage.set(\"PlayTimes\", times.toString());\r\n    };\r\n    StorageInfoClass.prototype.getTopScore = function () {\r\n        return Number(GameEngine_1.GameEngine.localStorage.get(\"TopScore\")) || 0;\r\n    };\r\n    StorageInfoClass.prototype.getRedPackTimes = function () {\r\n        return Number(GameEngine_1.GameEngine.localStorage.get(\"RedPackTimes\")) || 0;\r\n    };\r\n    StorageInfoClass.prototype.getRedPackMoney = function () {\r\n        return Number(GameEngine_1.GameEngine.localStorage.get(\"RedPackMoney\")) || 0;\r\n    };\r\n    StorageInfoClass.prototype.getGameYear = function () {\r\n        return GameEngine_1.GameEngine.localStorage.get(\"GameYear\");\r\n    };\r\n    StorageInfoClass.prototype.getGameMonth = function () {\r\n        return GameEngine_1.GameEngine.localStorage.get(\"GameMonth\");\r\n    };\r\n    StorageInfoClass.prototype.getGameDate = function () {\r\n        return GameEngine_1.GameEngine.localStorage.get(\"GameDate\");\r\n    };\r\n    StorageInfoClass.prototype.getGameAudioStatus = function () {\r\n        return GameEngine_1.GameEngine.localStorage.get(\"GameAudioStatus\");\r\n    };\r\n    StorageInfoClass.prototype.getFirstLogin = function () {\r\n        var isFirstLogin = GameEngine_1.GameEngine.localStorage.get(\"FirstLogin\");\r\n        return isFirstLogin == null;\r\n    };\r\n    StorageInfoClass.prototype.getPlayTimes = function () {\r\n        return Number(GameEngine_1.GameEngine.localStorage.get(\"PlayTimes\"));\r\n    };\r\n    return StorageInfoClass;\r\n}());\r\nexports.StorageInfo = StorageInfoClass.instance;\r\n"]}