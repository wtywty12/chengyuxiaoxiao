{"version":3,"sources":["GameData.js"],"names":["Object","defineProperty","exports","value","ConfigManager_1","require","StorageInfo_1","GameData","_level","_tempLevel","_score","_tempScore","_totalGameTime","_gametime","_playtimes","_gridEffectTime","_gridWidth","_gridHeight","_redPackTimes","_lastTime","prototype","refuseData","gameStart","addlevel","addscore","Math","floor","sqrt","StorageInfo","setTopScore","addgametime","levelsInfo","ConfigManager","levelsJsonMap","get","addtime","set","enumerable","configurable","_playerId","_totalTime","times"],"mappings":"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","file":"GameData.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\..\\assets\\Script\\src\\game\\common\\data","sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar ConfigManager_1 = require(\"../ConfigManager\");\r\nvar StorageInfo_1 = require(\"./StorageInfo\");\r\nvar GameData = (function () {\r\n    function GameData() {\r\n        this._level = 1;\r\n        this._tempLevel = 1;\r\n        this._score = 0;\r\n        this._tempScore = 0;\r\n        this._totalGameTime = 30;\r\n        this._gametime = this._totalGameTime;\r\n        this._playtimes = 0;\r\n        this._gridEffectTime = 0.5;\r\n        this._gridWidth = 109;\r\n        this._gridHeight = 109;\r\n        this._redPackTimes = 3;\r\n        this._lastTime = 0;\r\n    }\r\n    GameData.prototype.refuseData = function () {\r\n        this._tempLevel = this._level;\r\n        this._level = 1;\r\n        this._tempScore = this._score;\r\n        this._score = 0;\r\n        this._lastTime = 0;\r\n        this._gametime = this._totalGameTime;\r\n    };\r\n    GameData.prototype.gameStart = function () {\r\n        this._score = 0;\r\n        this._gametime = this._totalGameTime;\r\n    };\r\n    GameData.prototype.addlevel = function () {\r\n        this._level += 1;\r\n    };\r\n    GameData.prototype.addscore = function (value) {\r\n        this._score += Math.floor(value * Math.sqrt(this._playtimes || 1));\r\n        StorageInfo_1.StorageInfo.setTopScore(this._score);\r\n    };\r\n    GameData.prototype.addgametime = function () {\r\n        var levelsInfo = ConfigManager_1.ConfigManager.levelsJsonMap.get(this._level);\r\n        var value = levelsInfo.addtime || 0;\r\n        this._gametime += value;\r\n    };\r\n    Object.defineProperty(GameData.prototype, \"playtimes\", {\r\n        get: function () {\r\n            return this._playtimes;\r\n        },\r\n        set: function (_playtimes) {\r\n            this._playtimes = _playtimes;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(GameData.prototype, \"playerId\", {\r\n        get: function () {\r\n            return this._playerId;\r\n        },\r\n        set: function (_playerId) {\r\n            this._playerId = _playerId;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(GameData.prototype, \"level\", {\r\n        get: function () {\r\n            return this._level;\r\n        },\r\n        set: function (_level) {\r\n            this._level = _level;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(GameData.prototype, \"templevel\", {\r\n        get: function () {\r\n            return this._tempLevel;\r\n        },\r\n        set: function (_level) {\r\n            this._tempLevel = _level;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(GameData.prototype, \"score\", {\r\n        get: function () {\r\n            return this._score;\r\n        },\r\n        set: function (_score) {\r\n            this._score = _score;\r\n            StorageInfo_1.StorageInfo.setTopScore(_score);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(GameData.prototype, \"tempScore\", {\r\n        get: function () {\r\n            return this._tempScore;\r\n        },\r\n        set: function (_score) {\r\n            this._tempScore = _score;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(GameData.prototype, \"gametime\", {\r\n        get: function () {\r\n            return this._gametime;\r\n        },\r\n        set: function (_gametime) {\r\n            this._gametime = _gametime;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(GameData.prototype, \"totalGameTime\", {\r\n        get: function () {\r\n            return this._totalGameTime;\r\n        },\r\n        set: function (_totalTime) {\r\n            this._totalGameTime = _totalTime;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(GameData.prototype, \"gridEffectTime\", {\r\n        get: function () {\r\n            return this._gridEffectTime;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(GameData.prototype, \"gridGridWidth\", {\r\n        get: function () {\r\n            return this._gridWidth;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(GameData.prototype, \"gridGridHeight\", {\r\n        get: function () {\r\n            return this._gridHeight;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(GameData.prototype, \"redPackTimes\", {\r\n        get: function () {\r\n            return this._redPackTimes;\r\n        },\r\n        set: function (times) {\r\n            this._redPackTimes = times;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(GameData.prototype, \"lastTime\", {\r\n        get: function () {\r\n            return this._lastTime;\r\n        },\r\n        set: function (times) {\r\n            this._lastTime = times;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return GameData;\r\n}());\r\nexports.GameData = GameData;\r\n"]}