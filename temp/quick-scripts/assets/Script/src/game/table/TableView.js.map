{"version":3,"sources":["TableView.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","exports","value","ComponentContext_1","require","_a","cc","_decorator","ccclass","property","TableView","_super","_this","apply","Piece","level","cow","line","pieceNode","Map","pieceArr","haveIdPieceNode","pieceIdMap","pieceNum","levelNum","clickNum","nextLevelNum","start","ComponentContext","tableView","initTable","createPieces","j","panel","instantiate","parent","node","getComponent","name","init","set","push","heroId","Math","ceil","random","createPiece","createPieceByTime","schedule","lookupPiece","rand","trunc","get","piece","initHeroId","splice","num","log","string","unscheduleAllCallbacks","checkDispel","up","down","left","right","upType","pieceId","downType","leftType","rightType","removeUp","removeDown","removeLeft","removeRight","deletePiece","checkPiece","data","x","floor","y","upId","downId","leftId","rightId","id","has","deletePieceMap","clearPieceId","delete","oddNumArr","forEach","sort","piece1","piece2","Prefab","Label","Component"],"mappings":"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","file":"TableView.js","sourceRoot":"../../../../../../../assets/Script/src/game/table","sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ComponentContext_1 = require(\"../common/ComponentContext\");\nvar _a = cc._decorator, ccclass = _a.ccclass, property = _a.property;\nvar TableView = (function (_super) {\n    __extends(TableView, _super);\n    function TableView() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.Piece = null;\n        _this.level = null;\n        _this.cow = 11;\n        _this.line = 11;\n        _this.pieceNode = new Map();\n        _this.pieceArr = [];\n        _this.haveIdPieceNode = new Map();\n        _this.pieceIdMap = new Map();\n        _this.pieceNum = 35;\n        _this.levelNum = 1;\n        _this.clickNum = 30;\n        _this.nextLevelNum = 30;\n        return _this;\n    }\n    TableView.prototype.start = function () {\n        ComponentContext_1.ComponentContext.tableView = this;\n        this.initTable();\n        this.createPieces();\n    };\n    TableView.prototype.initTable = function () {\n        for (var i = 1; i < this.cow; i++) {\n            for (var j = 1; j < this.line; j++) {\n                var panel = cc.instantiate(this.Piece);\n                panel.parent = this.node;\n                panel.getComponent(panel.name).init((i * 10000 + j));\n                this.pieceNode.set((i * 10000 + j), panel);\n                this.pieceArr.push([i, j]);\n            }\n        }\n    };\n    TableView.prototype.createPieces = function () {\n        for (var i = 0; i < this.pieceNum; i++) {\n            var heroId = Math.ceil(Math.random() * 8);\n            for (var j = 0; j < 2; j++) {\n                this.createPiece(heroId);\n            }\n        }\n        this.createPieceByTime();\n    };\n    TableView.prototype.createPieceByTime = function () {\n        var _this = this;\n        this.schedule(function () {\n            var heroId = _this.lookupPiece();\n            if (heroId != -1) {\n                _this.createPiece(heroId);\n            }\n            else {\n                _this.createPiece(Math.ceil(Math.random() * 8));\n            }\n        }, 1);\n    };\n    TableView.prototype.createPiece = function (heroId) {\n        var rand = Math.trunc(Math.random() * (this.pieceArr.length));\n        if (this.pieceNode.get(this.pieceArr[rand][0] * 10000 + this.pieceArr[rand][1])) {\n            var piece = this.pieceNode.get(this.pieceArr[rand][0] * 10000 +\n                this.pieceArr[rand][1]).getComponent(\"Piece\");\n            piece.initHeroId(heroId);\n            this.haveIdPieceNode.set(this.pieceArr[rand][0] * 10000 +\n                this.pieceArr[rand][1], this.pieceNode.get(this.pieceArr[rand][0] * 10000 +\n                this.pieceArr[rand][1]));\n            this.pieceArr.splice(rand, 1);\n            if (this.pieceIdMap.get(heroId)) {\n                var num = this.pieceIdMap.get(heroId) + 1;\n                this.pieceIdMap.set(heroId, num);\n            }\n            else {\n                this.pieceIdMap.set(heroId, 1);\n            }\n        }\n        if (this.pieceArr.length == 0) {\n            cc.log(\"Game Over\", this.pieceArr.length);\n            this.level.string = \"Game Over\";\n            this.unscheduleAllCallbacks();\n        }\n    };\n    TableView.prototype.checkDispel = function (up, down, left, right) {\n        cc.log(\"checkDispel , up : \" + up + \"  down : \" + down + \"  left : \" + left + \"  right \" + right);\n        var upType = up == 0 ? 0 : this.haveIdPieceNode.get(up).getComponent(\"Piece\").pieceId;\n        var downType = down == 0 ? 0 : this.haveIdPieceNode.get(down).getComponent(\"Piece\").pieceId;\n        var leftType = left == 0 ? 0 : this.haveIdPieceNode.get(left).getComponent(\"Piece\").pieceId;\n        var rightType = right == 0 ? 0 : this.haveIdPieceNode.get(right).getComponent(\"Piece\").pieceId;\n        cc.log(\"checkDispel , upType : \" + upType + \"  downType : \" + downType + \"  leftType : \" + leftType + \"  rightType \" + rightType);\n        var removeUp = false;\n        var removeDown = false;\n        var removeLeft = false;\n        var removeRight = false;\n        if (!removeUp && up != 0) {\n            if (upType == downType) {\n                removeUp = true;\n                removeDown = true;\n            }\n            if (upType == leftType) {\n                removeUp = true;\n                removeLeft = true;\n            }\n            if (upType == rightType) {\n                removeUp = true;\n                removeRight = true;\n            }\n        }\n        if (!removeDown && down != 0) {\n            if (downType == leftType) {\n                removeDown = true;\n                removeLeft = true;\n            }\n            if (downType == rightType) {\n                removeDown = true;\n                removeRight = true;\n            }\n        }\n        if (!removeLeft && left != 0) {\n            if (leftType == rightType) {\n                removeLeft = true;\n                removeRight = true;\n            }\n        }\n        cc.log(\"checkDispel , removeUp : \" + removeUp + \"  removeDown : \" + removeDown + \"  removeLeft : \" + removeLeft + \"  removeRight \" + removeRight);\n        if (removeUp) {\n            this.deletePiece(up);\n        }\n        if (removeDown) {\n            this.deletePiece(down);\n        }\n        if (removeLeft) {\n            this.deletePiece(left);\n        }\n        if (removeRight) {\n            this.deletePiece(right);\n        }\n        return !removeUp && !removeDown && !removeLeft && !removeRight;\n    };\n    TableView.prototype.checkPiece = function (data) {\n        var x = Math.floor(data / 10000);\n        var y = data % 10000;\n        var upId = 0;\n        var downId = 0;\n        var leftId = 0;\n        var rightId = 0;\n        for (var i = x - 1; i > 0; i--) {\n            var id = (i * 10000 + y);\n            if (this.haveIdPieceNode.has(id)) {\n                upId = id;\n                break;\n            }\n        }\n        for (var i = x + 1; i <= 10; i++) {\n            var id = (i * 10000 + y);\n            if (this.haveIdPieceNode.has(id)) {\n                downId = id;\n                break;\n            }\n        }\n        for (var i = y - 1; i > 0; i--) {\n            var id = (x * 10000 + i);\n            if (this.haveIdPieceNode.has(id)) {\n                leftId = id;\n                break;\n            }\n        }\n        for (var i = y + 1; i <= 10; i++) {\n            var id = (x * 10000 + i);\n            if (this.haveIdPieceNode.has(id)) {\n                rightId = id;\n                break;\n            }\n        }\n        if (this.checkDispel(upId, downId, leftId, rightId)) {\n            cc.log(\"没有可以消除的方块\");\n        }\n    };\n    TableView.prototype.deletePiece = function (heroId) {\n        var piece = this.haveIdPieceNode.get(heroId).getComponent(\"Piece\");\n        this.deletePieceMap(piece.pieceId);\n        piece.clearPieceId();\n        this.pieceArr.push([Math.floor(heroId / 10000), heroId % 10000]);\n        this.haveIdPieceNode.delete(heroId);\n    };\n    TableView.prototype.deletePieceMap = function (heroId) {\n        if (this.pieceIdMap.get(heroId)) {\n            var num = this.pieceIdMap.get(heroId) - 1;\n            if (num == 0) {\n                this.pieceIdMap.delete(heroId);\n            }\n            else {\n                this.pieceIdMap.set(heroId, num);\n            }\n        }\n    };\n    TableView.prototype.lookupPiece = function () {\n        var _this = this;\n        var num = -1;\n        var oddNumArr = [];\n        this.pieceIdMap.forEach(function (value, key) {\n            if (value % 2 != 0) {\n                oddNumArr.push(key);\n            }\n        });\n        oddNumArr.sort(function (piece1, piece2) { return _this.pieceIdMap.get(piece1) - _this.pieceIdMap.get(piece2); });\n        if (oddNumArr.length != 0) {\n            num = oddNumArr[0];\n        }\n        return num;\n    };\n    __decorate([\n        property(cc.Prefab)\n    ], TableView.prototype, \"Piece\", void 0);\n    __decorate([\n        property(cc.Label)\n    ], TableView.prototype, \"level\", void 0);\n    TableView = __decorate([\n        ccclass\n    ], TableView);\n    return TableView;\n}(cc.Component));\nexports.TableView = TableView;\n"]}