{"version":3,"sources":["Audio.js"],"names":["Object","defineProperty","exports","value","ResourcesManager_1","require","Audio","bgVolume","bgAudioID","sfxVolume","init","prototype","playBGM","url","cc","audioEngine","stop","play","ResourcesManager","getSound","playSFX","changeBGMVolume","volume","force","getState","AudioState","PAUSED","resume","pause","sys","localStorage","setItem","toString","setVolume","changeSFXVolume","pauseAll","resumeAll","stopAll"],"mappings":"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","file":"Audio.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\Script\\src\\core\\common","sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar ResourcesManager_1 = require(\"./ResourcesManager\");\r\nvar Audio = (function () {\r\n    function Audio(bgVolume, bgAudioID) {\r\n        this.bgVolume = 1.0;\r\n        this.sfxVolume = 1.0;\r\n        this.bgAudioID = -1;\r\n        this.bgVolume = bgVolume;\r\n        this.bgAudioID = bgAudioID;\r\n        this.init();\r\n    }\r\n    Audio.prototype.init = function () {\r\n    };\r\n    Audio.prototype.playBGM = function (url) {\r\n        if (this.bgAudioID >= 0) {\r\n            cc.audioEngine.stop(this.bgAudioID);\r\n        }\r\n        this.bgAudioID = cc.audioEngine.play(ResourcesManager_1.ResourcesManager.getSound(url), true, this.bgVolume);\r\n    };\r\n    Audio.prototype.playSFX = function (url, sfxVolume) {\r\n        if (this.sfxVolume > 0) {\r\n            cc.audioEngine.play(ResourcesManager_1.ResourcesManager.getSound(url), false, sfxVolume);\r\n        }\r\n    };\r\n    Audio.prototype.changeBGMVolume = function (volume, force) {\r\n        if (this.bgAudioID >= 0) {\r\n            if (volume > 0 && cc.audioEngine.getState(this.bgAudioID) ===\r\n                cc.audioEngine.AudioState.PAUSED) {\r\n                cc.audioEngine.resume(this.bgAudioID);\r\n            }\r\n            else if (volume == 0) {\r\n                cc.audioEngine.pause(this.bgAudioID);\r\n            }\r\n        }\r\n        if (this.bgVolume != volume || force) {\r\n            cc.sys.localStorage.setItem(\"bgVolume\", volume.toString());\r\n            this.bgVolume = volume;\r\n            cc.audioEngine.setVolume(this.bgAudioID, volume);\r\n        }\r\n    };\r\n    Audio.prototype.changeSFXVolume = function (volume) {\r\n        if (this.sfxVolume != volume) {\r\n            cc.sys.localStorage.setItem(\"sfxVolume\", volume.toString());\r\n            this.sfxVolume = volume;\r\n        }\r\n    };\r\n    Audio.prototype.getState = function () {\r\n        return cc.audioEngine.getState(this.bgAudioID);\r\n    };\r\n    Audio.prototype.pauseAll = function () {\r\n        cc.audioEngine.pauseAll();\r\n    };\r\n    Audio.prototype.resumeAll = function () {\r\n        cc.audioEngine.resumeAll();\r\n    };\r\n    Audio.prototype.stopAll = function () {\r\n        cc.audioEngine.stopAll();\r\n    };\r\n    return Audio;\r\n}());\r\nexports.Audio = Audio;\r\n"]}